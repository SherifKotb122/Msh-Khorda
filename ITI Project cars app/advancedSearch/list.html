<!DOCTYPE html>
<html>

<head>
    <title>List page</title>
    <link href="../advancedSearch/templatemo-style.css" rel="stylesheet"/>
</head>

<body>
    <header>
        &nbsp;
        &nbsp;
        <!-- <div><img src="../logo.PNG" alt="diwa drift Logo" width="70px" style="border-radius: 20px;"></div> -->
        <div style="text-align: center;" ><a href="../advancedSearch/adsearch.html"> <img src="../logo.PNG" width="170px" style="border-radius: 70%;"></a>
        </div>
    </header>
    &nbsp;
    &nbsp;
    &nbsp;
    &nbsp;
    <nav>
      <div class="btn-group" style="width:100%; display: inline;">
        <a href="../advancedSearch/adsearch.html"><button style="width:24.77%; font-size:16px">ِِِHome</button></a>
        <!-- <a href="adsearch.html"><button style="width:24.77%; font-size:16px">Advanced Search</button></a> -->
        <a href="../compare/compare.html"><button style="width:24.77%; font-size:16px">Compare</button></a> 
        <a href="#fotr"><button style="width:24.77%; font-size:16px">About Us</button></a>
        
      </div>
    </nav>
    <main>
		<header class="row tm-welcome-section">
		<div class="row tm-gallery">
			<!-- gallery page 1 -->
			<!------------------ home page-------------------------- -->
			<div id="list" class="tm-gallery-page obj">

			</div> <!-- gallery page 3 -->
		</div>

	</main>

    </div>
    <footer id="footer">
        &nbsp;
        &nbsp;
        <div id="fotr">
            <h3 id="abth">About Us</h3>
            <p id="abtp">
                This Website has been made by ( Group 7) .Net WebDevelopment Track in ITI Minya Branch
            </p>

        <div id="soc"><a href="https://linkedin.com" target="_blank"><img src="../PreviewPage/images/linkedin.webp" width="40px"></a> &nbsp;
            <a href="https://facebook.com" target="_blank"><img src="../PreviewPage/images/facebook.png" width="40px"></a> &nbsp;
            <a href="https://twitter.com" target="_blank"><img src="../PreviewPage/images/twitter.webp" width="40px"></a> &nbsp;
            <a href="https://www.instagram.com" target="_blank"><img src="../PreviewPage/images/insta.png" width="41px"></a> &nbsp;
            <a href="https://www.youtube.com" target="_blank"><img src="../PreviewPage/images/yt.png" width="41px"></a></div>
            
        </div>
        
        <div id="links">
            <h4>Other Links</h4>
            <a href="../advancedSearch/adsearch.html" >Home</a><br><br>
            <a href="../compare/compare.html">Compare</a><br><br>
            <a href="../loginPage/login.html">Login</a>
        </div>
        <div style="text-align: center;">
          <div>
            <!-- <img src="https://www.carsprite.com/storage/img/logo-white.png" width="152px" height="100px"> -->
            <div style="text-align: center;" ><a href="../advancedSearch/adsearch.html"> <img src="../logo.PNG" width="250px" style="border-radius: 70%;"></a>
            <p>
              You will find any car you are looking for! We provide the latest prices<br> and specifications for all new cars in Egypt
            </p>
          </div>
        </div>
        &nbsp;
        &nbsp;
        <div style="text-align: center;">
          
          <img width="40px" src="../PreviewPage/images/pijo.png">&nbsp;&nbsp;
          <img width="40px" src="../PreviewPage/images/toy.png">&nbsp;&nbsp;<img width="50px" src="../PreviewPage/images/ford.png">&nbsp;&nbsp;<img width="50px" src="../PreviewPage/images/audi.png">
          <h5>Copyright &copy; 2021 All Rights Reserved</h5>
        </div>

    <script src="java.js"></script>
    <!-- <script>
        var listPage = [];
        listPage.length = 0;
        jsonArray((err,data)=>{
	for(let i =0; i< data.length; i++){
		if(carType == data[i].type && data[i].price<= priceX && shapeX == data[i].shape && transX == data[i].transmission ){
             listPage.push(data[i]);
		}
    }
    console.log(listPage);
    var listX = document.getElementById("lists");
    listX.innerHTML= `<h1>Shape: </h1> ${listPage[0].shape}`;
    
	});
    </script> -->

    <script>
        var listPage = [];
        listPage.length = 0;
        jsonArray((err, data) => {
            if (carType) {
                if (priceX) {
                    if (shapeX == "sedan" || shapeX == "Hatchback") {
                        if (transX == "Automatic" || transX == "Manual") {
                            for (let i = 0; i < data.length; i++) {
                                if (carType == data[i].type && data[i].price <= priceX && shapeX == data[i].shape && transX == data[i].transmission) { listPage.push(data[i]); }
                            }
                        } else if (transX == "all") {
                            for (let i = 0; i < data.length; i++) {
                                if (carType == data[i].type && data[i].price <= priceX && shapeX == data[i].shape) { listPage.push(data[i]); }
                            }
                        }
                    } else if (shapeX == "all") {
                        if (transX == "Automatic" || transX == "Manual") {
                            for (let i = 0; i < data.length; i++) {
                                if (carType == data[i].type && data[i].price <= priceX && transX == data[i].transmission) { listPage.push(data[i]); }
                            }
                        } else if (transX == "all") {
                            for (let i = 0; i < data.length; i++) {
                                if (carType == data[i].type && data[i].price <= priceX) { listPage.push(data[i]); }
                            }
                        }
                    }
                } else {
                    if (shapeX == "sedan" || shapeX == "Hatchback") {
                        if (transX == "Automatic" || transX == "Manual") {
                            for (let i = 0; i < data.length; i++) {
                                if (carType == data[i].type && shapeX == data[i].shape && transX == data[i].transmission) { listPage.push(data[i]); }
                            }
                        } else if (transX == "all") {
                            for (let i = 0; i < data.length; i++) {
                                if (carType == data[i].type && shapeX == data[i].shape) { listPage.push(data[i]); }
                            }
                        }

                    } else if (shapeX == "all") {
                        if (transX == "Automatic" || transX == "Manual") {
                            for (let i = 0; i < data.length; i++) {
                                if (carType == data[i].type && transX == data[i].transmission) { listPage.push(data[i]); }
                            }
                        } else if (transX == "all") {
                            for (let i = 0; i < data.length; i++) {
                                if (carType == data[i].type) { listPage.push(data[i]); }
                            }
                        }

                    }
                }
            } else {
                if (priceX) {
                    if (shapeX == "sedan" || shapeX == "Hatchback") {
                        if (transX == "Automatic" || transX == "Manual") {
                            for (let i = 0; i < data.length; i++) {
                                if (data[i].price <= priceX && shapeX == data[i].shape && transX == data[i].transmission) { listPage.push(data[i]); }
                            }
                        } else if (transX == "all") {
                            for (let i = 0; i < data.length; i++) {
                                if (data[i].price <= priceX && shapeX == data[i].shape) { listPage.push(data[i]); }
                            }
                        }

                    } else if (shapeX == "all") {
                        if (transX == "Automatic" || transX == "Manual") {
                            for (let i = 0; i < data.length; i++) {
                                if (data[i].price <= priceX && transX == data[i].transmission) { listPage.push(data[i]); }
                            }
                        } else if (transX == "all") {
                            for (let i = 0; i < data.length; i++) {
                                if (data[i].price <= priceX) { listPage.push(data[i]); }
                            }
                        }

                    }

                } else {
                    if (shapeX == "sedan" || shapeX == "Hatchback") {
                        if (transX == "Automatic" || transX == "Manual") {
                            for (let i = 0; i < data.length; i++) {
                                if (shapeX == data[i].shape && transX == data[i].transmission) { listPage.push(data[i]); }
                            }
                        } else if (transX == "all") {
                            for (let i = 0; i < data.length; i++) {
                                if (shapeX == data[i].shape) { listPage.push(data[i]); }
                            }
                        }

                    } else if (shapeX == "all") {
                        if (transX == "Automatic" || transX == "Manual") {
                            for (let i = 0; i < data.length; i++) {
                                if (transX == data[i].transmission) { listPage.push(data[i]); }
                            }
                        }
                    }
                }
            }
            displaysection(listPage);
        });
        function displaysection(jsonT) {

            var element = document.getElementById("list");
            element.innerHTML = "";
            for (var i = 0; i < jsonT.length; i++) {
                var articletage = document.createElement("article")
                articletage.className = "col-lg-3 col-md-4 col-sm-6 col-12 tm-gallery-item"
                //figure
                var figuretage = document.createElement("figure")
                //img
                var imgtag = document.createElement("img");
                imgtag.src = jsonT[i].img[0]
                imgtag.className = 'img-fluid tm-gallery-img'
                imgtag.alt = "Image"
                //link
                var atag = document.createAttribute("a")
                //figcaption
                var figcaptiontage = document.createElement("figcaption");

                //a
                var atag = document.createElement("a")
                atag.className = "tm-gallery-title carUrl"
                atag.id = jsonT[i].id
                //atag.addEventListener("click",detailcare)
                atag.addEventListener("click", detailcareid)
                atag.href = "../PreviewPage/Preview Page.html"
                atag.append(jsonT[i].name)
                //p
                var ptage1 = document.createElement("p")
                ptage1.className = 'tm-gallery-description'
                ptage1.append(listPage[i].name+"with"+" "+"shape"+" "+listPage[i].shape+" "+"and"+" "+"transmission "+"  "+listPage[i].transmission)

                //p2
                var ptage2 = document.createElement("p")
                ptage2.className = 'tm-gallery-price'
                ptage2.append(jsonT[i].price)

                //use appendchild
                articletage.appendChild(figuretage)
                figuretage.appendChild(imgtag)
                figuretage.appendChild(figcaptiontage)
                figcaptiontage.appendChild(atag)
                figcaptiontage.appendChild(ptage1)
                figcaptiontage.appendChild(ptage2)
                element.appendChild(articletage);
            }
            //prepareCarDetailsData(jsonT);
        }
        function detailcareid() {
            var carId = this.id
       
                    localStorage.setItem("carId",carId)

                
            }
        
    </script>
</body>

</html>